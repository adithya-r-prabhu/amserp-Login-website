<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="login.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700,900" rel="stylesheet" type="text/css">
    <script src="https://kit.fontawesome.com/388686b0cd.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <a href="https://sparkitts.com/"><img id="sparkitlogo" src="sparkit.png" alt="SparkIT Logo"></a>
                <a href="https://amserp.in/"><img id="amserplogo" src="amserp.png" alt="AMS ERP Logo"></a>
            </div>
            <div id="nav-button-div" class="d-grid gap-3 d-md-flex justify-content-md-end">
                <a class="btn btn-primary navbutton" href="/index.php/user/login/loginguest">Visitors</a>
                <a class="btn btn-primary navbutton" href="/index.php/user/login/loginguest1">Admissions</a>
            </div>
        </div>
    </nav>
    <div class="flex-container">
        <div class="flex-item-left">
            <h1 style="font-size:38px; color:white;">AMS ERP – 5.0</h1>
            <h5 style="font-size:18px; color:white;">The Finest School Management Software</h5>
            <p style="font-size:15px; color:white;">Digitizing scholastic institutions to survive in this Internet era with a myriad of benefits to excel in academics as well as management.</p>
            <div class="store-images">
                <a href="https://apps.apple.com/in/app/ams-erp/id1568940785"><img src="applestore.png" alt=""></a>
                <a href="https://play.google.com/store/apps/details?id=gescis.erp&hl=en_IN"><img src="googleplay.png" alt=""></a>
            </div>
        </div>

        <div class="flex-item-right">

            <div class="content">
                <!-- Simple login form -->
                <form action="/index.php/user/login" method="post">
                    <div class="panel panel-body login-form"></div>
                    <div class="text-center">
                        <div id="school-logo"><img src="bhavans-elamakkara-logo.png" alt="" width=""></div>
                        <h5 class="content-group">Log In <br><small class="display-block">Enter your credentials below</small></h5>
                    </div>
                    <div class="form-group has-feedback has-feedback-left">
                        <div class="input-group">
                            <span class="input-group-text">
                                <i class="fa fa-user text-muted"></i>
                            </span>
                            <input class="form-control input-lg" placeholder="Username" name="UserLogin[username]" id="UserLogin_username" type="text">
                        </div>
                    </div>
                    <div class="form-group has-feedback has-feedback-left">
                        <div class="input-group">
                            <span class="input-group-text">
                                <i class="fa fa-lock text-muted"></i>
                            </span>
                            <input class="form-control input-lg" placeholder="Password" name="UserLogin[password]" id="UserLogin_password" type="password">
                        </div>
                    </div>
                    <div class="form-group">
                        <input class="btn btn-primary btn-block btn-lg" type="submit" name="yt0" value="Sign in">
                    </div>
                    <div id="forpass">
                        <center><a href="/index.php/user/recovery/recovery">Forgot Password?</a></center>
                    </div>
                    <div class="text-center">
                        <!--<div class="g-signin2" data-onsuccess="onSignIn" style="height:36px;width:280px;"></div> -->
                        <div id="my-signin2" style="height:36px;width:280px;"></div>
                    </div>
                    <br>
                    <div class="text-danger"></div>
                </form>
                <script>
                    function onSignIn(googleUser) {
                        var profile = googleUser.getBasicProfile();
                        console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
                        console.log('Name: ' + profile.getName());
                        console.log('Image URL: ' + profile.getImageUrl());
                        console.log('Email: ' + profile.getEmail());
                        var email = profile.getEmail();
                        $.ajax({
                            type: "POST",
                            url: "login/loginwithgmail",
                            data: { emailid: email },
                            dataType: "html",
                            success: function (data) {
                                if (data === "failed") {
                                    var auth2 = gapi.auth2.getAuthInstance();
                                    auth2.signOut().then(function () {
                                        console.log('User signed out.');
                                    });
                                    alert('Invalid Username Or Password');
                                } else {
                                    location.reload();
                                }
                            }
                        });
                    }
                    function signOut() {
                        var auth2 = gapi.auth2.getAuthInstance();
                        auth2.signOut().then(function () {
                            console.log('User signed out.');
                        });
                    }
                    function onSuccess(googleUser) {
                        console.log('Logged in as: ' + googleUser.getBasicProfile().getName());
                    }
                    function onFailure(error) {
                        console.log(error);
                    }
                    function renderButton() {
                        gapi.signin2.render('my-signin2', {
                            'scope': 'profile email',
                            'width': 280,
                            'height': 37,
                            'longtitle': true,
                            'theme': 'dark',
                            'onsuccess': onSignIn,
                            'onfailure': onFailure
                        });
                    }
                </script>
            </div>
            <div id="copyright-footer">
                © 2015-24. AMSERP. V5.0 Powered by SparkIT Techno Solutions Pvt. Ltd.
            </div>
        </div>
    </div>
</body>
</html>
